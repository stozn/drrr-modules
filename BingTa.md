# [冰她模块（BingTa）](BingTa.py)

桌游《冰冷的她醒来之前》的模块，可以在drrr聊天室内进行游戏。[**图文版说明**](https://docs.qq.com/aio/DUmdZeHFteElNa3Z0?p=O4fcyF2HI8XWoTcVd4F60c)

## 游戏简介

学校内有学生被感染了丧尸病毒！！现在冰冷的她正安静的躺在教室内。
同学们分为几个小队，由各自的队长带领小队来一边寻找犯人，
在冰冷的她醒来之前，要找到犯人！
在冰冷的她醒来之前，完成调和防腐剂！	
在冰冷的她醒来之前，完成自己的任务！！
玩家扮演的是这个小队的队长（最后留在手上的就是队长，也就是你的底牌）
通过指挥你的小队的其他成员，利用他们的能力，或者让他们去调和防腐剂，
或者去质疑其他队伍的成员都可以哦！



## 游戏流程

1. 确定游戏人数，设定游戏调和目标和卡组配置。	
2. 分发卡牌。
3. 持有【学生会长】的玩家作为起始玩家开始游戏。
4. 从起始玩家开始，轮流进行自己的回合，执行以下行动中的一个：	
	* 【使用】从手牌正面打出1张卡，发动那张卡的技能。		
	* 【调和】从手牌背面打出1张卡，用于调和。
	* 【质疑】从手牌背面打出1张卡，用于质疑1个其他玩家。			
5. 当玩家的手牌剩下最后1张手牌时，该玩家的身份被固定，且其他人无法通过技能换走这张卡。那张卡的胜利目标，就是你的胜利目标。
6. 当全部玩家的身份都固定下来时，明牌，判断玩家是否获胜：
	* 被质疑卡牌的MP之和最大的玩家被监禁。如果最高票有多人则多人监禁。所有人同票则无人被监禁。
	* 计算调和区MP之和，如果大于等于目标调和值，则调和成功，否则调和失败。
	* 根据优先级⭐依次判断玩家是否满足胜利条件。
	* 满足胜利条件的玩家中优先级最高的为最终获胜者。



## 指令列表

| 指令                    | 说明                            |
| ----------------------- | ------------------------------- |
| **全局**                | **以下命令可用：**              |
| /指令                   | 查看指令列表                    |
| /说明                   | 查看图文版游戏说明              |
| /游戏                   | 回到报名阶段重新开始游戏        |
| /p                      | 查看所有玩家                    |
| /s                      | 查看当前状态                    |
| **报名阶段**            | **以下命令可用：**              |
| /go                     | 开始游戏                        |
| +1                      | 加入游戏                        |
| -1                      | 退出游戏                        |
| **游戏阶段**            | **以下命令可用：**              |
| /手牌                   | 查看手牌                        |
| /使用 `卡牌名`          | 打出一张卡，使用该卡技能        |
| /调和 `卡牌名`          | 添加一张卡到调和区，进行调和    |
| /质疑 `玩家名` `卡牌名` | 质疑这个玩家携带有犯人卡        |
| /调和                   | 查看调和牌数量                  |
| /质疑                   | 查看所有玩家质疑牌数量          |
| /已用区                 | 查看所有玩家的已用牌            |
| /取消                   | 放弃使用卡牌技能（防卡死）      |
| **结束阶段**            | **以下命令可用：**              |
| /身份                   | 查看所有玩家的最终身份          |
| /已用区                 | 查看所有玩家的已用牌            |
| /调和区                 | 查看调和区的牌                  |
| /质疑区                 | 查看所有玩家的质疑牌            |
| **更多指令**            | **请根据bot的提示信息进行游戏** |



## 游戏全卡牌与卡组配置

[**图片版**](https://docs.qq.com/sheet/DVkVCWFFueUVFcXNB?tab=2hv3p3)

| MP  | 名字     | 能力                             | 优先级 | 胜利条件           | 根据玩家人数调整卡牌数量 |     |     |     | 备注                             |
| --- | -------- | -------------------------------- | ------ | ------------------ | ------------------------ | --- | --- | --- | -------------------------------- |
|     |          |                                  |        |                    | 3人                      | 4人 | 5人 | 6人 |                                  |
| -1  | 外星人   | 持有期间可伪装成犯人             | 1      | 不被毒死且被监禁   | 1                        | 1   | 1   | 1   | 打出无效果                       |
| 0   | 感染者   | 抽走1张调和牌                    | 2      | 不被毒死且调和失败 | 1                        | 1   | 1   | 1   |                                  |
| 0   | 犯人     | 不能直接使用                     | 3      | 不被毒死且不被监禁 | 1                        | 1   | 1   | 1   | 可以被技能转移,无法打出          |
| 0   | 共犯     | 移动自己的1张质疑牌给他人        | 3      | 犯人胜利           | 0                        | 1   | 1   | 1   |                                  |
| 3   | 学生会长 | 起始玩家                         | 4      | 调和成功           | 1                        | 1   | 1   | 1   | 打出无效果                       |
| 2   | 生物部*  | 游戏结束时，毒死被此卡质疑的玩家 | 4      | 调和成功           | 1                        | 1   | 1   | 1   | 打出无效果【drrr为了平衡特制卡】 |
| 2   | 班长     | 和1名玩家互换1张手牌             | 4      | 调和成功           | 2                        | 2   | 2   | 2   |                                  |
| 2   | 优等生   | 查出犯人                         | 4      | 调和成功           | 1                        | 2   | 2   | 2   | 可能会被外星人混淆               |
| 1   | 风纪委员 | 查看某人的全部手牌               | 4      | 调和成功           | 1                        | 2   | 2   | 2   |                                  |
| 1   | 保健委员 | 取走他人1张已使用的牌            | 4      | 调和成功           | 2                        | 2   | 2   | 2   | 不能取走【保健委员】【生物部】   |
| 1   | 图书委员 | 查看调和牌                       | 4      | 调和成功           | 2                        | 2   | 2   | 2   |                                  |
| 1   | 大小姐   | 抽走某人1张手牌并返还1张         | 4      | 调和成功           | 1                        | 2   | 3   | 2   |                                  |
| 1   | 新闻部   | 全体将1张手牌交给下家            | 4      | 调和成功           | 2                        | 3   | 3   | 3   |                                  |
| 0   | 归宅部   | 用1张手牌交换1张调和牌           | 5      | 其他人都失败       | 2                        | 3   | 3   | 3   |

| 根据游戏人数不同时，设置的变化 | 3人 | 4人 | 5人 | 6人 |
| ------------------------------ | --- | --- | --- | --- |
| 卡牌总数                       | 18  | 25  | 26  | 25  |
| 每人平均手牌数                 | 6   | 6   | 5   | 4   |
| 调和所需点数                   | 9   | 8   | 7   | 6   |
